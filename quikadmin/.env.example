# ==========================================
# QuikAdmin Backend Environment Configuration
# ==========================================
# AUTHORITATIVE SOURCE for: DATABASE_URL, SUPABASE_*, JWT_*, REDIS_*, R2_*
#
# Copy this file to .env and update with your actual values
#
# NOTE: Supabase keys should ONLY exist here - NOT in root .env
# The SUPABASE_SERVICE_ROLE_KEY grants admin access and must be protected

# ==========================================
# Server Configuration
# ==========================================
NODE_ENV=development
PORT=3002
CORS_ORIGINS=http://localhost:3000,http://localhost:3001,http://localhost:5173

# ==========================================
# Database Configuration (Neon PostgreSQL)
# ==========================================
# Get from: https://console.neon.tech/
# Format: postgresql://user:password@host/dbname?sslmode=require
DATABASE_URL=postgresql://user:password@host/dbname?sslmode=require

# ==========================================
# Redis Configuration
# ==========================================
# Used for job queues and rate limiting
REDIS_URL=redis://localhost:6379
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=

# Redis Sentinel Configuration (optional, for HA)
REDIS_SENTINEL_ENABLED=false
REDIS_SENTINEL_HOSTS=sentinel1:26379,sentinel2:26379,sentinel3:26379
REDIS_SENTINEL_MASTER_NAME=mymaster

# ==========================================
# Database Pool Configuration
# ==========================================
DB_POOL_MIN=2
DB_POOL_MAX=10
DB_IDLE_TIMEOUT_MS=30000
DB_CONNECTION_TIMEOUT_MS=10000

# ==========================================
# JWT Configuration
# ==========================================
# ⚠️  REQUIRED: App will crash on startup if missing or <64 characters
# Generate secure secrets (EXACTLY 64+ characters):
# node -e "console.log(require('crypto').randomBytes(64).toString('hex'))"
#
# DO NOT use the placeholder values below - generate your own!
JWT_SECRET=REPLACE_WITH_OUTPUT_FROM_CRYPTO_RANDOMBY TES_HEX_MINIMUM_64_CHARS
JWT_REFRESH_SECRET=REPLACE_WITH_OUTPUT_FROM_CRYPTO_RANDOMBYTES_HEX_MINIMUM_64_CHARS
JWT_ISSUER=intellifill
JWT_AUDIENCE=intellifill-api

# ==========================================
# Rate Limiting
# ==========================================
# Max requests per window (in minutes)
RATE_LIMIT_MAX=100
RATE_LIMIT_WINDOW=15

# ==========================================
# Supabase Configuration
# ==========================================
# Get from: https://app.supabase.com/project/_/settings/api
# Phase 4: Will replace custom JWT auth
SUPABASE_URL=https://your-project.supabase.co
SUPABASE_ANON_KEY=your-anon-key
SUPABASE_SERVICE_ROLE_KEY=your-service-role-key

# ==========================================
# Database Driver Selection (optional)
# ==========================================
# Set to true to use Neon Serverless driver for edge/serverless environments
# Default: false (uses standard pg driver with connection pooling)
USE_NEON_SERVERLESS=false
