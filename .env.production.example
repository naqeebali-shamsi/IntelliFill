# IntelliFill Backend Production Environment Variables
# Copy this file to .env.production and fill in your actual values
# DO NOT commit .env.production to version control

# ==============================================================================
# CORE APPLICATION SETTINGS
# ==============================================================================

# Node environment - must be "production" for production deployments
NODE_ENV=production

# Port the backend server will listen on (default: 3002)
PORT=3002

# Log level for application logging
# Options: error, warn, info, http, verbose, debug, silly
LOG_LEVEL=info

# ==============================================================================
# DATABASE CONFIGURATION (Neon PostgreSQL)
# ==============================================================================

# Primary database connection URL with connection pooling
# Format: postgresql://[user]:[password]@[host]/[database]?sslmode=require&pgbouncer=true
# Example: postgresql://user:pass@ep-cool-pond-123456.us-east-2.aws.neon.tech/intellifill?sslmode=require&pgbouncer=true
DATABASE_URL=

# Direct database connection URL (without connection pooling)
# Used for migrations and operations that require direct database access
# Format: postgresql://[user]:[password]@[host]/[database]?sslmode=require
# Example: postgresql://user:pass@ep-cool-pond-123456.us-east-2.aws.neon.tech/intellifill?sslmode=require
DIRECT_URL=

# ==============================================================================
# REDIS CONFIGURATION (Upstash Redis)
# ==============================================================================

# Redis connection URL for Bull queues and caching
# Format: redis://default:[password]@[host]:[port]
# Example: redis://default:AbCdEf123456@usw1-example-redis.upstash.io:6379
REDIS_URL=

# Upstash Redis REST API URL for serverless/edge environments
# Example: https://usw1-example-redis.upstash.io
UPSTASH_REDIS_REST_URL=

# Upstash Redis REST API token for authentication
# Example: AbCdEf123456GhIjKl789012MnOpQr345678
UPSTASH_REDIS_REST_TOKEN=

# ==============================================================================
# AUTHENTICATION & SECURITY
# ==============================================================================

# Secret key for signing JWT access tokens (use a strong random string)
# Generate with: openssl rand -base64 32
JWT_SECRET=

# Secret key for signing JWT refresh tokens (use a different strong random string)
# Generate with: openssl rand -base64 32
JWT_REFRESH_SECRET=

# JWT access token expiration time (default: 15m)
# Format: number + unit (s=seconds, m=minutes, h=hours, d=days)
# JWT_ACCESS_EXPIRES_IN=15m

# JWT refresh token expiration time (default: 7d)
# JWT_REFRESH_EXPIRES_IN=7d

# ==============================================================================
# SUPABASE CONFIGURATION (Optional - for Supabase Auth mode)
# ==============================================================================

# Supabase project URL
# Example: https://abcdefghijklmnop.supabase.co
# SUPABASE_URL=

# Supabase anonymous/public API key (safe to expose to clients)
# Example: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
# SUPABASE_ANON_KEY=

# Supabase service role key (SECRET - never expose to clients)
# Used for admin operations that bypass Row Level Security
# SUPABASE_SERVICE_ROLE_KEY=

# ==============================================================================
# CLOUDFLARE R2 STORAGE
# ==============================================================================

# Cloudflare account ID
# Found in Cloudflare Dashboard > R2 > Overview
# Example: 1a2b3c4d5e6f7g8h9i0j1k2l3m4n5o6p
R2_ACCOUNT_ID=

# R2 access key ID for API authentication
# Create in Cloudflare Dashboard > R2 > Manage R2 API Tokens
# Example: abc123def456ghi789jkl012mno345
R2_ACCESS_KEY_ID=

# R2 secret access key (SECRET)
# Example: AbCdEfGhIjKlMnOpQrStUvWxYz0123456789
R2_SECRET_ACCESS_KEY=

# R2 bucket name for storing documents and files
# Example: intellifill-production
R2_BUCKET_NAME=

# R2 public URL for accessing files (optional)
# If using a custom domain or R2.dev subdomain
# Example: https://files.intellifill.com or https://pub-abc123.r2.dev
# R2_PUBLIC_URL=

# ==============================================================================
# GOOGLE AI (GEMINI)
# ==============================================================================

# Google AI API key for Gemini models (document processing, embeddings)
# Create at: https://makersuite.google.com/app/apikey
# Example: AIzaSyAbc123Def456Ghi789Jkl012Mno345Pqr678
GOOGLE_API_KEY=

# Gemini model to use for document processing
# Options: gemini-2.0-flash-exp, gemini-1.5-pro, gemini-1.5-flash
# GEMINI_MODEL=gemini-2.0-flash-exp

# Gemini model to use for generating embeddings
# Options: text-embedding-004, embedding-001
# GEMINI_EMBEDDING_MODEL=text-embedding-004

# ==============================================================================
# CORS CONFIGURATION
# ==============================================================================

# Allowed origins for Cross-Origin Resource Sharing (comma-separated)
# Include your frontend production URLs
# Example: https://intellifill.com,https://www.intellifill.com,https://app.intellifill.com
CORS_ORIGINS=

# ==============================================================================
# MONITORING & ERROR TRACKING (Optional)
# ==============================================================================

# Sentry DSN for error tracking and monitoring
# Create project at: https://sentry.io
# Example: https://abc123def456@o123456.ingest.sentry.io/7890123
# SENTRY_DSN=

# Sentry environment name
# SENTRY_ENVIRONMENT=production

# Sentry sample rate for performance monitoring (0.0 to 1.0)
# SENTRY_TRACES_SAMPLE_RATE=0.1

# ==============================================================================
# RATE LIMITING
# ==============================================================================

# Maximum number of requests per window per IP address
# RATE_LIMIT_MAX=100

# Time window for rate limiting in minutes
# RATE_LIMIT_WINDOW_MS=15

# ==============================================================================
# FILE UPLOAD LIMITS
# ==============================================================================

# Maximum file size for uploads in bytes (default: 10MB)
# Example: 10485760 = 10MB, 52428800 = 50MB
# MAX_FILE_SIZE=10485760

# Allowed file types for document uploads (comma-separated)
# ALLOWED_FILE_TYPES=application/pdf,image/jpeg,image/png,image/jpg

# ==============================================================================
# QUEUE CONFIGURATION
# ==============================================================================

# Number of concurrent jobs for document processing queue
# QUEUE_CONCURRENCY=5

# Job attempt limit before marking as failed
# QUEUE_MAX_ATTEMPTS=3

# Backoff delay between retry attempts in milliseconds
# QUEUE_BACKOFF_DELAY=5000

# ==============================================================================
# SESSION CONFIGURATION
# ==============================================================================

# Session secret for cookie signing (use a strong random string)
# Generate with: openssl rand -base64 32
# SESSION_SECRET=

# Session max age in milliseconds (default: 24 hours)
# SESSION_MAX_AGE=86400000

# ==============================================================================
# OPTIONAL: WEBHOOK CONFIGURATION
# ==============================================================================

# Webhook URL for processing completion notifications
# WEBHOOK_URL=

# Webhook secret for signature verification
# WEBHOOK_SECRET=

# ==============================================================================
# OPTIONAL: EMAIL CONFIGURATION
# ==============================================================================

# SMTP host for sending emails
# SMTP_HOST=

# SMTP port (usually 587 for TLS, 465 for SSL)
# SMTP_PORT=587

# SMTP username
# SMTP_USER=

# SMTP password
# SMTP_PASS=

# Email "from" address
# EMAIL_FROM=noreply@intellifill.com

# ==============================================================================
# FEATURE FLAGS
# ==============================================================================

# Enable/disable document OCR processing
# ENABLE_OCR=true

# Enable/disable vector search for knowledge base
# ENABLE_VECTOR_SEARCH=true

# Enable/disable audit logging
# ENABLE_AUDIT_LOG=true

# ==============================================================================
# NOTES
# ==============================================================================
# 1. All SECRET values (JWT_SECRET, R2_SECRET_ACCESS_KEY, etc.) should be
#    generated using cryptographically secure random generators
# 2. Never commit .env.production with real values to version control
# 3. Use your hosting platform's environment variable management:
#    - Vercel: Project Settings > Environment Variables
#    - Railway: Project > Variables
#    - Render: Environment > Environment Variables
# 4. Rotate secrets regularly and immediately if compromised
# 5. Use different values for staging and production environments
