---
phase: 01-foundation
plan: 01
type: execute
---

<objective>
Create the Smart Profile wizard infrastructure: page shell, Zustand store with persist, and routing.

Purpose: Establish the foundation for the multi-step wizard flow with state persistence.
Output: Working `/smart-profile` route with wizard shell and persistent state management.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-phase.md
~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01-foundation/01-RESEARCH.md

**Codebase patterns to follow:**
@quikadmin-web/src/stores/uploadStore.ts (Zustand pattern with immer)
@quikadmin-web/src/pages/DocumentLibrary.tsx (Page structure)
@quikadmin-web/CLAUDE.md (Component and store patterns)

**Tech stack available:**

- Zustand 5.x with immer and persist middleware
- React Router 6.x
- TailwindCSS 4.0
- Radix UI primitives

**Key decisions:**

- Wizard state persisted to localStorage for save/resume
- Steps: upload → grouping → review → profile → form-select
- Auto-skip logic handled in store actions
  </context>

<tasks>

<task type="auto">
  <name>Task 1: Create smart-profile Zustand store</name>
  <files>quikadmin-web/src/stores/smartProfileStore.ts</files>
  <action>
Create Zustand store following existing uploadStore.ts pattern:

1. Use `create` from 'zustand' with immer and persist middleware
2. Define SmartProfileState interface:
   - step: 'upload' | 'grouping' | 'review' | 'profile' | 'form-select'
   - uploadedFiles: UploadedFile[] (id, file, status, detectedType, confidence)
   - detectedPeople: DetectedPerson[] (id, name, documentIds)
   - lowConfidenceFields: LowConfidenceField[] (fieldName, value, confidence, documentId)
   - profileData: Record<string, any>
   - selectedFormId: string | null
   - clientId: string | null (for linking to existing client system)

3. Define actions:
   - setStep(step)
   - addFiles(files: File[])
   - updateFileDetection(id, detectedType, confidence)
   - setDetectedPeople(people)
   - setLowConfidenceFields(fields)
   - setProfileData(data)
   - selectForm(formId)
   - setClientId(clientId)
   - reset()

4. Use persist middleware with name 'smart-profile-wizard'
5. Export useSmartProfileStore and selector hooks

DO NOT use persist for File objects (they can't be serialized). Only persist IDs and metadata.
</action>
<verify>TypeScript compiles: cd quikadmin-web && bun run typecheck</verify>
<done>Store exports useSmartProfileStore, types compile, persist configured for non-File data</done>
</task>

<task type="auto">
  <name>Task 2: Create SmartProfile page with wizard shell</name>
  <files>quikadmin-web/src/pages/SmartProfile.tsx</files>
  <action>
Create SmartProfile page following existing page patterns:

1. Import useSmartProfileStore
2. Create wizard step indicator showing current step
3. Render placeholder content for each step:
   - 'upload': "Drop documents here" placeholder
   - 'grouping': "Person grouping" placeholder
   - 'review': "Field review" placeholder
   - 'profile': "Profile view" placeholder
   - 'form-select': "Form selection" placeholder

4. Add navigation buttons (Back, Next) that call setStep
5. Add "Start Over" button that calls reset()
6. Use PageHeader component with breadcrumb: Home > Smart Profile
7. Wrap in ContentContainer for consistent layout

Style with TailwindCSS using semantic tokens. DO NOT use hardcoded colors.
</action>
<verify>Page renders without errors when accessing /smart-profile route</verify>
<done>SmartProfile page renders wizard steps, navigation works, store connected</done>
</task>

<task type="auto">
  <name>Task 3: Add Smart Profile route to App.tsx</name>
  <files>quikadmin-web/src/App.tsx</files>
  <action>
Add route for SmartProfile page:

1. Import SmartProfile from '@/pages/SmartProfile'
2. Add route inside protected routes section:
   <Route path="/smart-profile" element={<SmartProfile />} />
3. Place after /upload route (similar flow, different entry point)

DO NOT modify any existing routes or imports.
</action>
<verify>Navigate to http://localhost:8080/smart-profile shows wizard page</verify>
<done>Route accessible, page renders within protected layout</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `cd quikadmin-web && bun run typecheck` passes
- [ ] `cd quikadmin-web && bun run build` succeeds
- [ ] Navigate to /smart-profile shows wizard UI
- [ ] Step navigation works (Back/Next buttons)
- [ ] Store persist works (refresh page, state preserved)
- [ ] Reset button clears state
</verification>

<success_criteria>

- Smart profile store created with all state and actions
- SmartProfile page renders wizard steps
- Route accessible at /smart-profile
- No TypeScript errors
- State persists across page refresh (except File objects)
  </success_criteria>

<output>
After completion, create `.planning/phases/01-foundation/01-01-SUMMARY.md`
</output>
