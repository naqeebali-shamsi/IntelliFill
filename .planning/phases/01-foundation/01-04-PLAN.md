---
phase: 01-foundation
plan: 04
type: execute
---

<objective>
Create basic ProfileView component displaying extracted data with field sources.

Purpose: Show users their extracted profile data organized by category with source indicators.
Output: Working ProfileView that displays fields, shows source document, allows inline editing.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-phase.md
~/.claude/get-shit-done/templates/summary.md
~/.claude/get-shit-done/references/checkpoints.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01-foundation/01-RESEARCH.md
@.planning/phases/01-foundation/01-03-SUMMARY.md

**Codebase patterns:**
@quikadmin-web/src/components/features/profile-fields-manager.tsx (existing profile UI)
@quikadmin-web/src/components/features/profile-field-editor.tsx

**Key decisions:**

- Group fields by category (Personal, Document, Contact, etc.)
- Show source document name as small pill next to each field
- Allow inline editing (marks field as manuallyEdited)
- Confidence badges only for low-confidence fields
  </context>

<tasks>

<task type="auto">
  <name>Task 1: Create ProfileView component</name>
  <files>quikadmin-web/src/components/smart-profile/ProfileView.tsx, quikadmin-web/src/components/smart-profile/FieldSourcePill.tsx</files>
  <action>
Create ProfileView component:

**ProfileView.tsx:**

1. Read profileData and fieldSources from smartProfileStore
2. Group fields by category:
   - Personal: firstName, lastName, fullName, dateOfBirth, nationality, gender
   - Documents: passportNumber, emiratesIdNumber, licenseNumber, expiryDates
   - Contact: email, phone, address
   - Other: any fields not in above categories

3. For each category, render a collapsible section with Card component
4. For each field:
   - Label (human-readable)
   - Value (editable inline)
   - FieldSourcePill showing source document
   - ConfidenceBadge if low-confidence

5. On field edit:
   - Update profileData in store
   - Mark field as manuallyEdited in fieldSources

**FieldSourcePill.tsx:**

1. Small pill component showing document name
2. Icon based on document type (passport, ID, etc.)
3. "Manual" label if manuallyEdited
4. Use muted styling to not distract from field values
   </action>
   <verify>ProfileView renders with sample data, fields grouped correctly</verify>
   <done>ProfileView displays extracted fields with source indicators</done>
   </task>

<task type="auto">
  <name>Task 2: Add inline field editing</name>
  <files>quikadmin-web/src/components/smart-profile/ProfileView.tsx, quikadmin-web/src/components/smart-profile/EditableField.tsx</files>
  <action>
Create EditableField component for inline editing:

1. Display mode: shows value with edit button (pencil icon)
2. Edit mode: input field with save/cancel buttons
3. On save:
   - Call setProfileData with updated value
   - Update fieldSources to mark as manuallyEdited
4. Support field types: text, date, select (for enumerated values)

Integrate into ProfileView:

- Replace static field values with EditableField
- Pass field type based on field name (dateOfBirth → date, nationality → select)

DO NOT use React Hook Form here - simple controlled inputs are fine for single-field editing.
</action>
<verify>Click edit → input appears → save → value updated in store</verify>
<done>Fields editable inline, changes persist to store with manuallyEdited flag</done>
</task>

<task type="auto">
  <name>Task 3: Integrate ProfileView into wizard and add completion flow</name>
  <files>quikadmin-web/src/pages/SmartProfile.tsx</files>
  <action>
Complete the wizard flow:

1. Render ProfileView in 'profile' step
2. Add "Continue to Form Selection" button
3. For MVP, form selection is placeholder: "Form selection coming in Phase 3"
4. Add "Save Profile" button that creates/links to a Client:
   - If clientId exists, update existing client profile
   - If no clientId, create new client with extracted data
   - Call existing client API endpoints
   - Show success toast

5. Add navigation breadcrumb updates for each step
6. Add step completion indicator (checkmarks for completed steps)

This completes the basic "Upload → See" flow. "Fill" step is Phase 3.
</action>
<verify>Full flow: Upload → Extract → View Profile → Save to Client works</verify>
<done>Complete wizard flow from upload to profile save</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>Complete Smart Profile wizard with upload, extraction, and profile view</what-built>
  <how-to-verify>
    1. Start frontend: cd quikadmin-web && bun run dev
    2. Start backend: cd quikadmin && npm run dev
    3. Navigate to http://localhost:8080/smart-profile
    4. Drop a test document (PDF or image)
    5. Verify document type detection shows with confidence badge
    6. Click Continue to trigger extraction
    7. Verify profile view shows extracted fields grouped by category
    8. Verify field source pills show document name
    9. Click edit on a field, change value, save
    10. Verify field shows "Manual" source after edit
    11. Click Save Profile to create client
    12. Verify client created (check /clients page)
  </how-to-verify>
  <resume-signal>Type "approved" to complete Phase 1 Foundation, or describe issues to fix</resume-signal>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] Frontend build passes
- [ ] ProfileView renders extracted data
- [ ] Fields grouped by category
- [ ] Source pills show document origin
- [ ] Inline editing works
- [ ] Save Profile creates client
- [ ] Full wizard flow works end-to-end
</verification>

<success_criteria>

- ProfileView component displays all extracted fields
- Fields organized by category (Personal, Documents, Contact, Other)
- FieldSourcePill shows source document for each field
- Inline editing updates store with manuallyEdited flag
- Save Profile creates/updates client via existing API
- Phase 1 Foundation complete
  </success_criteria>

<output>
After completion, create `.planning/phases/01-foundation/01-04-SUMMARY.md` with:
- Summary of Phase 1 accomplishments
- List of all files created
- Any deviations from plan
- Ready for Phase 2: Intelligence
</output>
