# Plan 03-02: Wizard Animations

**Phase:** 03-polish
**Wave:** 1
**Autonomous:** true

## Goal

Polished direction-aware wizard transitions with accessibility support. Users experience smooth, consistent animations that respect their motion preferences.

## Prerequisites

- Phase 2 complete
- Framer Motion v12.23.25 installed
- `src/lib/animations.ts` exists with base variants

## Tasks

### Task 1: Create wizard animation variants

**Files:**

- `quikadmin-web/src/components/smart-profile/animations/wizard-variants.ts` (new)

**Variants to create:**

```typescript
// Direction-aware step transitions
export const stepVariants: Variants = {
  enter: (direction: number) => ({
    x: direction > 0 ? 50 : -50,
    opacity: 0,
  }),
  center: {
    x: 0,
    opacity: 1,
  },
  exit: (direction: number) => ({
    x: direction < 0 ? 50 : -50,
    opacity: 0,
  }),
};

// Reduced motion fallback (opacity only)
export const fadeStepVariants: Variants = {
  enter: { opacity: 0 },
  center: { opacity: 1 },
  exit: { opacity: 0 },
};

// Transition configs
export const stepTransition = {
  x: { type: 'spring', stiffness: 300, damping: 30 },
  opacity: { duration: 0.2 },
};

export const reducedMotionTransition = {
  duration: 0.15,
};
```

### Task 2: Enhance SmartProfile with variants and reduced motion

**Files:**

- `quikadmin-web/src/pages/SmartProfile.tsx` (modify)

**Changes:**

1. Import wizard variants and `useReducedMotion` hook from framer-motion
2. Track step direction in state (1 for forward, -1 for backward)
3. Replace inline animation objects with variants:

```typescript
const shouldReduceMotion = useReducedMotion();

// In step navigation
const goToStep = (newStep: number) => {
  setDirection(newStep > currentStep ? 1 : -1);
  setCurrentStep(newStep);
};

// In AnimatePresence
<AnimatePresence mode="wait" custom={direction}>
  <motion.div
    key={currentStep}
    custom={direction}
    variants={shouldReduceMotion ? fadeStepVariants : stepVariants}
    initial="enter"
    animate="center"
    exit="exit"
    transition={shouldReduceMotion ? reducedMotionTransition : stepTransition}
  >
    {renderStep()}
  </motion.div>
</AnimatePresence>
```

4. Remove all inline animation objects (performance anti-pattern)

### Task 3: Add staggered animations for lists

**Files:**

- `quikadmin-web/src/components/smart-profile/PersonGrouper/index.tsx` (modify)
- `quikadmin-web/src/components/smart-profile/FormSuggester/index.tsx` (modify if exists)

**Changes:**

1. Import staggerContainer and fadeInUp from `src/lib/animations.ts`
2. Wrap list containers with motion.div using staggerContainer variant
3. Wrap list items with motion.div using fadeInUp variant

**Pattern:**

```typescript
<motion.div variants={staggerContainer} initial="hidden" animate="show">
  {items.map((item) => (
    <motion.div key={item.id} variants={fadeInUp}>
      <ItemCard {...item} />
    </motion.div>
  ))}
</motion.div>
```

## Verification

- [ ] `bun run build` succeeds
- [ ] Step transitions animate left/right based on direction
- [ ] Reduced motion users see fade-only transitions
- [ ] No console warnings about inline animation objects
- [ ] Person cards and form cards animate with stagger

## Commit Format

```
feat(03-02): {task-name}
```

---

_Plan created: 2026-01-16_
